<!DOCTYPE html>
<html lang="en">
<head>
  <title>Simultaneous Contrast Illusion</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <!-- Core Utilities-->
  <link rel="stylesheet" href="https://acidtone.github.io/core/v0/css/colour.css">

  <!-- TODO: figure out why GH Pages won't serve the below file. @import? -->
  <!-- <link rel="stylesheet" href="https://acidtone.github.io/core/v0/css/fonts.css"> -->

  <!-- Hack to fix the problem above. -->
  <link href="https://fonts.googleapis.com/css2?family=Raleway&display=swap" rel="stylesheet"> 
  <link rel="stylesheet" href="../css/fonts.css">

  <!-- Project Styles -->
  <link rel="stylesheet" href="../css/_vars.css">
  <link rel="stylesheet" href="../css/base.css">
  <link rel="stylesheet" href="../css/controls.css">
  <link rel="stylesheet" href="../css/patches.css">
  <link rel="stylesheet" href="../css/bg-gradient.css">
  <link rel="stylesheet" href="../css/tissue.css">
</head>
<body data-clr-harmony="comp">
  <header>
    <h1>Tissue Contrast Illusion</h1>
    <p>Take two identical grey patches.</p>
    <div class="checkbox">
      <input type="checkbox" id="bg">
      <label for="bg">Add a light/dark background. The patch on the light background appears darker than the one on a dark background.</label>
      </label>
    </div>
    <div class="checkbox">
      <input type="checkbox" id="tissue">
      <label for="tissue">Overlay a semi-transparent image to magnify the effect.</label>
    </div>
  </header>
  <main class="overlay">
    <section class="split-bg">
      <article class="patch"></article>
      <article class="patch"></article>
    </section>
    <div class="tissue hidden"></div>
  </main>
  <script>
    /* Setup global variables */
    const root = document.querySelector(':root');
    
    /* TODO: move to checkbox module-controller-thing */
    /* Initialize controls */
    const bg = document.getElementById('bg');
    const img = document.getElementById('tissue');

    /* Initialize :checked checkboxes
        ex. page reloaded but form state saved, so reset classList on page load.
    */
    if (bg.checked) {
      root.querySelector('.split-bg').classList.add('bg-active');
    }
    if (img.checked) {
      root.querySelector('.tissue').classList.remove('hidden');
    }

    /* Toggle things */
    /* The above reset avoids having controls toggle out of sync. */
    bg.addEventListener('change', (event) => {
      root.querySelector('.split-bg').classList.toggle('bg-active');
    })
    img.addEventListener('change', (event) => {
      root.querySelector('.tissue').classList.toggle('hidden');
    })

  </script>
</body>
</html>